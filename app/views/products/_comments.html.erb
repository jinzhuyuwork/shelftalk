<% comments = current_user.admin? ? @product.comments : current_user.comments %>

<h2 class="font-bold text-3xl">Comments</h2>

<% comments.each do |comment| %>
  <div class="flex flex-col sm:flex-row justify-between items-center pb-5 sm:pb-0 py-2.5">
    <%= comment.user.email.split('@').first %>: "<%= comment.content %>"
    <div class="w-full sm:w-auto flex flex-col sm:flex-row space-x-2 space-y-2">
      <%= link_to 'Delete', product_comment_path(@product, comment), class: "w-full rounded-md px-3.5 py-2.5 text-white bg-red-600 hover:bg-red-500 font-medium cursor-pointer", data: { turbo_method: :delete, confirm: "Are you sure?" } %>
    </div>
  </div>
<% end %>

<h2 class="font-bold text-3xl">Add A Comment</h2>
<%= form_with(model: [ @product, @product.comments.build ], local: true) do |form| %>
  <div class="flex flex-col my-5">
    <%= form.text_area :content, rows: 3, class: "block shadow-sm rounded-md border px-3 py-2 mt-2 w-full, border-gray-400 focus:outline-blue-600" %><br>
  </div>
  <div class="inline">
    <%= form.submit "Add Comment", class: "w-full sm:w-auto rounded-md px-3.5 py-2.5 bg-blue-600 hover:bg-blue-500 text-white inline-block font-medium cursor-pointer" %>
  </div>
<% end %>
